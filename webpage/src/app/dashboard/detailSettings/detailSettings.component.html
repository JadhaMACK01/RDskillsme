<!--this is the account detail setting page, user can edit their account detail, like name and password, email is unique not editable -->

<div class="imagebox"><div class="textbox"></div></div>
<div class="row" >
    <div class="update-form">
        <form [formGroup]="updateForm">
          <h1 class="text-center">My Account Settings</h1>
          <!-- First name -->
          <div class="mb-3">
            <mat-form-field appearance="fill">
              <mat-label>First Name  <mat-icon>account_box</mat-icon></mat-label>
              <input matInput formControlName="firstName" required  [ngClass]="{ 'is-invalid': submitted && f.firstName.errors }" >
              <div *ngIf="submitted && f.firstName.errors" class="invalid-feedback">
                <mat-error *ngIf="f.firstName.errors.required">First Name is required</mat-error>
              </div>
            </mat-form-field>
          </div>

          <!-- Last name -->
          <div class="mb-3">
            <mat-form-field appearance="fill">
              <mat-label>Last Name  <mat-icon>account_box</mat-icon></mat-label>
              <input matInput formControlName="lastName" required  [ngClass]="{ 'is-invalid': submitted && f.lastName.errors }" >
              <div *ngIf="submitted && f.lastName.errors" class="invalid-feedback">
                <mat-error *ngIf="f.lastName.errors.required">Last Name is required</mat-error>
              </div>
            </mat-form-field>
          </div>

          <!-- Email -->
          <div class="mb-3">
            <mat-form-field appearance="fill">
              <mat-label>Email <mat-icon>email</mat-icon></mat-label>
              <input matInput placeholder="pat@example.com" formControlName="email" required readonly  [ngClass]="{ 'is-invalid': submitted && f.email.errors }" >
              <div *ngIf="submitted && f.email.errors" class="invalid-feedback">
                  <mat-error *ngIf="f.email.errors.required">Email is required</mat-error>
                  <mat-error *ngIf="f.email.errors.email">Email must be a valid email address</mat-error>
              </div>
              <mat-hint >Hint: Email can not be changed </mat-hint>
            </mat-form-field>
          </div>

          <!-- Password -->
          <div class="mb-3">
            <mat-form-field appearance="fill">
              <mat-label>Password <mat-icon>lock_open</mat-icon></mat-label>
              <input type="password" matInput [type]="hide ? 'password' : 'text'" formControlName="password" required  [ngClass]="{ 'is-invalid': submitted && f.password.errors }">
              <button class="icon" mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
                <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
              </button>
              <!--hint-->
              <!--Must contain at least one number and one uppercase and lowercase letter, and at least 6 or more characters-->
              <div *ngIf="submitted && f.password.errors" class="invalid-feedback">
                <mat-error *ngIf="f.password.errors.required">Password is required</mat-error>
                <mat-error *ngIf="f.password.errors.pattern">Password must contain at least one number and one uppercase and lowercase letter, and at least 6 or more characterss</mat-error>
              </div>
            </mat-form-field>
          </div>

          <!-- Confirm Password -->
          <div class="mb-3">
            <mat-form-field appearance="fill">
              <mat-label>Confirm Your Password <mat-icon>lock_open</mat-icon></mat-label>
              <input matInput [type]="hide ? 'password' : 'text'" formControlName="confirmPassword"  required  [ngClass]="{ 'is-invalid': submitted && f.confirmPassword.errors }">
              <button class="icon" mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
                <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
              </button>
              <!--hint-->
              <!--double check the password, must be same as the password-->
              <div *ngIf="submitted && f.confirmPassword.errors" class="invalid-feedback">
                <mat-error *ngIf="f.confirmPassword.errors.mustMatch">Password must match</mat-error>
              </div>
            </mat-form-field>
          </div>
           
          <!-- University -->
          <div class="mb-3">
            <mat-form-field appearance="fill">
              <mat-label>University <mat-icon>school</mat-icon></mat-label>
              <input matInput formControlName="university"  >
            </mat-form-field>
          </div>
          <div class="buttonleft"><button style="float: right;" class="update" (click)="saveForm()">Update</button></div>
          <div class="buttonright"> <button class="float-left" (click)="resetForm()">Reset</button></div>
          </form>
          
          

    </div>
</div>
