<!-- this is the register page, user need to input the account detail (first name, last name, email, password, university, student proof file) 
  to register a new account. univerisy column is not required, the other columns are required. -->


<div class="row">
    <div class="register-form">
      <img src='../../../assets/logo.png' alt="logo" style="width:200px;height:100px;">
        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
          <h1 class="text-center">Register</h1>
          <!-- First name -->
          <div class="mb-3">
            <mat-form-field appearance="fill">
              <mat-label>Enter your First Name  <mat-icon>account_box</mat-icon></mat-label>
              <input matInput formControlName="firstName" required  [ngClass]="{ 'is-invalid': submitted && f.firstName.errors }" >
              <div *ngIf="submitted && f.firstName.errors" class="invalid-feedback">
                <mat-error *ngIf="f.firstName.errors.required">First Name is required</mat-error>
              </div>
            </mat-form-field>
          </div>

          <!-- Last name -->
          <div class="mb-3">
            <mat-form-field appearance="fill">
              <mat-label>Enter your Last Name  <mat-icon>account_box</mat-icon></mat-label>
              <input matInput formControlName="lastName" required  [ngClass]="{ 'is-invalid': submitted && f.lastName.errors }" >
              <div *ngIf="submitted && f.lastName.errors" class="invalid-feedback">
                <mat-error *ngIf="f.lastName.errors.required">Last Name is required</mat-error>
              </div>
            </mat-form-field>
          </div>

          <!-- Email -->
          <div class="mb-3">
            <mat-form-field appearance="fill">
              <mat-label>Enter your email <mat-icon>email</mat-icon></mat-label>
              <input matInput placeholder="pat@example.com" formControlName="email" required  [ngClass]="{ 'is-invalid': submitted && f.email.errors }" >
              <div *ngIf="submitted && f.email.errors" class="invalid-feedback">
                  <mat-error *ngIf="f.email.errors.required">Email is required</mat-error>
                  <mat-error *ngIf="f.email.errors.email">Email must be a valid email address</mat-error>
              </div>
            </mat-form-field>
          </div>

          <!-- Password -->
          <div class="mb-3">
            <mat-form-field appearance="fill">
              <mat-label>Enter your password <mat-icon>lock_open</mat-icon></mat-label>
              <input type="password" matInput [type]="hide ? 'password' : 'text'" formControlName="password" required  [ngClass]="{ 'is-invalid': submitted && f.password.errors }">
              <button class="icon" mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
                <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
              </button>
              <!--hint-->
              <!--Must contain at least one number and one uppercase and lowercase letter, and at least 6 or more characters-->
              <div *ngIf="submitted && f.password.errors" class="invalid-feedback">
                <mat-error *ngIf="f.password.errors.required">Password is required</mat-error>
                <mat-error *ngIf="f.password.errors.pattern">Password must contain at least one number and one uppercase and lowercase letter, and at least 6 or more characterss</mat-error>
              </div>
            </mat-form-field>
          </div>

          <!-- Confirm Password -->
          <div class="mb-3">
            <mat-form-field appearance="fill">
              <mat-label>Confirm your password <mat-icon>lock_open</mat-icon></mat-label>
              <input matInput [type]="hide ? 'password' : 'text'" formControlName="confirmPassword"  required  [ngClass]="{ 'is-invalid': submitted && f.confirmPassword.errors }">
              <button class="icon" mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
                <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
              </button>
              <!--hint-->
              <!--double check the password, must be same as the password-->
              <div *ngIf="submitted && f.confirmPassword.errors" class="invalid-feedback">
                <mat-error *ngIf="f.confirmPassword.errors.mustMatch">Password must match</mat-error>
              </div>
            </mat-form-field>
          </div>
           
          <!-- University -->
          <div class="mb-3">
            <mat-form-field appearance="fill">
              <mat-label>Enter your university <mat-icon>school</mat-icon></mat-label>
              <input matInput formControlName="university"  >
            </mat-form-field>
          </div>
          
          <!-- Upload PDF -->
          <div class="mb-3">      
            <label>Upload your student certificate 
              <input type="file" (change)="selectFile($event)">
            </label>
            <p>*This website is for students only, please provide relevant proof(eg:student ID card)</p> 
          </div>

          <!-- Rgister Button-->
          <button type="submit" class="btn btn-primary" [disabled]="!selectedFiles">Register<i class="fas fa-sign-in-alt"></i></button>
        

          
          </form>
          <!-- Return To Login Page -->
          <p class="text-center">Already on Skillsme? <a [routerLink]="['/login']">Sign in</a></p>


    </div>
</div>
